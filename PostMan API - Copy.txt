import os

def list_project_structure(base_path, output_file):
    with open(output_file, 'w') as f:
        for root, dirs, files in os.walk(base_path):
            level = root.replace(base_path, '').count(os.sep)
            indent = ' ' * 4 * level
            f.write(f"{indent}{os.path.basename(root)}/\n")
            subindent = ' ' * 4 * (level + 1)
            for file in files:
                f.write(f"{subindent}{file}\n")

def create_structure_template(output_file):
    structure = """
# ğŸ“¦ Project Structure: Ticket Management System

backend/
    â”œâ”€â”€ src/
    â”‚   â”œâ”€â”€ main/
    â”‚   â”‚   â”œâ”€â”€ java/com/example/ticket/
    â”‚   â”‚   â”‚   â”œâ”€â”€ controller/
    â”‚   â”‚   â”‚   â”‚   â”œâ”€â”€ AuthController.java
    â”‚   â”‚   â”‚   â”‚   â”œâ”€â”€ CustomerController.java
    â”‚   â”‚   â”‚   â”‚   â”œâ”€â”€ EngineerController.java
    â”‚   â”‚   â”‚   â”‚   â””â”€â”€ TicketController.java
    â”‚   â”‚   â”‚   â”œâ”€â”€ model/
    â”‚   â”‚   â”‚   â”‚   â”œâ”€â”€ User.java
    â”‚   â”‚   â”‚   â”‚   â”œâ”€â”€ Ticket.java
    â”‚   â”‚   â”‚   â”‚   â””â”€â”€ Role.java
    â”‚   â”‚   â”‚   â”œâ”€â”€ service/
    â”‚   â”‚   â”‚   â”‚   â”œâ”€â”€ UserService.java
    â”‚   â”‚   â”‚   â”‚   â””â”€â”€ TicketService.java
    â”‚   â”‚   â”‚   â””â”€â”€ repository/
    â”‚   â”‚   â”‚       â”œâ”€â”€ UserRepository.java
    â”‚   â”‚   â”‚       â””â”€â”€ TicketRepository.java
    â”‚   â””â”€â”€ resources/
    â”‚       â””â”€â”€ application.properties
    â””â”€â”€ pom.xml

frontend/
    â”œâ”€â”€ public/
    â”œâ”€â”€ src/
    â”‚   â”œâ”€â”€ components/
    â”‚   â”‚   â”œâ”€â”€ LoginForm.js
    â”‚   â”‚   â”œâ”€â”€ Dashboard.js
    â”‚   â”‚   â”œâ”€â”€ CreateTicket.js
    â”‚   â”‚   â”œâ”€â”€ CreateCustomer.js
    â”‚   â”‚   â””â”€â”€ CreateEngineer.js
    â”‚   â”œâ”€â”€ App.js
    â”‚   â””â”€â”€ index.js
    â””â”€â”€ package.json

# ğŸ§‘â€ğŸ’¼ User Roles & Permissions:

- **Customer**
  - Can login
  - Can create ticket only

- **Engineer**
  - Can login
  - Can create customer

- **Default Engineer (admin: `default_engineer` / `password`)**
  - Can create other engineers

# ğŸ” Auth Flow:
- Backend handles JWT-based auth or session
- Frontend manages login token and dashboard routes based on role
    """
    with open(output_file, 'a') as f:
        f.write(structure)

def main():
    project_path = input("Enter the path to your IntelliJ Spring Boot project: ").strip()
    output_file = "project_structure.txt"
    
    if not os.path.isdir(project_path):
        print("Error: Invalid path")
        return

    list_project_structure(project_path, output_file)
    create_structure_template(output_file)
    print(f"âœ… Project structure written to {output_file}")

if __name__ == "__main__":
    main()